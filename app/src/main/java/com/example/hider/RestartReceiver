import android.content.*;
import android.os.*;

public class RestartReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(final Context context, Intent intent) {
        new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {
            @Override
            public void run() {
                Intent i = new Intent(context, MainActivity.class);
                i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
                // ВОТ ОН, СУКА, ТВОЙ ФЛАГ:
                i.putExtra("restarted", true); 
                context.startActivity(i);
            }
        }, 500);
    }
}
